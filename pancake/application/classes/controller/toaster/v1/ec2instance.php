<?php defined('SYSPATH') OR die('No direct access allowed.'); /** * Pancake Controller ec2_instance *  * Created Oct 17, 2012 1:57:30 PM * @author equemuel */class Controller_Toaster_v1_Ec2instance extends Controller{	public function action_save()	{		$instance_id = Arr::get($_REQUEST, 'instance_id', NULL);		$ftp_host = Arr::get($_REQUEST, 'ftp_host', NULL);		$ftp_user = Arr::get($_REQUEST, 'ftp_user', NULL);		$ftp_pass = Arr::get($_REQUEST, 'ftp_pass', NULL);		$service_start = Arr::get($_REQUEST, 'service_start', NULL);				$status = FALSE;		$data = array();				if($instance_id && $ftp_host && $ftp_pass && $ftp_user)		{			$result = DB::insert('ec2_instance', array('instance_id', 'ftp_host', 'ftp_user', 'ftp_pass', 'service_start'))				->values(array($instance_id, $ftp_host, $ftp_user, $ftp_pass, $service_start))				->execute('toaster');			if($result)			{				$status = TRUE;				$message = 'Successfully saved the instance';				$data['id'] = $result[0];			}			else			{				$message = 'Error saving the instance';			}					}		else		{			$message = 'All parameters must be set.';		}				$output = PancakeResponse::out($status, $message, $data);		$this->response->body($output);	}		public function action_get()		{		$id = Arr::get($_REQUEST, 'id', NULL);				$status = FALSE;		$data = array();				if($id)		{			$results = DB::select('instance_id', 'ftp_host', 'ftp_user', 'ftp_pass', 'service_start', 'service_end')				->from('ec2_instance')				->where('id', '=', $id)				->execute('toaster');						if($results)			{				$status = TRUE;				$data = $results[0];				$message = "Successfully retrieved instance information.";			}			else			{				$message = "Error retrieving the instance information.";			}		}		else		{			$message = 'Iid parameter is missing';		}				$output = PancakeResponse::out($status, $message, $data);		$this->response->body($output);	}}